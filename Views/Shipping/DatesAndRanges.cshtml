@model DatesRangesSearchModel
@using Nop.Core;

@inject Nop.Services.Common.IGenericAttributeService genericAttributeService
@inject IWorkContext workContext

@{

    Layout = "_AdminLayout";

    //page title
    ViewBag.Title = T("Plugins.Shipping.Manager.DatesAndRanges").Text;
    //active menu item (system name)
    NopHtml.SetActiveMenuItemSystemName("Nop.Plugins.Shipping.Manager.DatesAndRanges");

    bool vendorVisible = Model.VendorId == 0;
}

@{
    const string hideDatesBlockAttributeName = "DatesAndRangesPage.HideDatesBlock";
    var hideDatesBlock = await genericAttributeService.GetAttributeAsync<bool>(await workContext.GetCurrentCustomerAsync(), hideDatesBlockAttributeName);

    const string hideRangesBlockAttributeName = "DatesAndRangesPage.HideRangesBlock";
    var hideRangesBlock = await genericAttributeService.GetAttributeAsync<bool>(await workContext.GetCurrentCustomerAsync(), hideRangesBlockAttributeName);
}

<nop-antiforgery-token />
<div class="content-header clearfix">
    <h1 class="float-left">
        @T("Admin.Configuration.Shipping.DatesAndRanges")
    </h1>
    <div class="float-right">
        &nbsp;
        @await Component.InvokeAsync("AdminWidget", new { widgetZone = AdminWidgetZones.DatesAndRangesButtons })
    </div>
</div>

<div class="content">
    <div class="form-horizontal">
        @await Component.InvokeAsync("VendorScopeConfiguration")
        <div class="cards-group">
            <nop-panels id="datesandranges-panels">
                <nop-panel asp-name="datesandranges-dates" asp-icon="fa fa-calendar" asp-title="@T("Admin.Configuration.Shipping.DeliveryDates")" asp-hide-block-attribute-name="@hideDatesBlockAttributeName" asp-hide="@hideDatesBlock" asp-advanced="false">
                    @await Html.PartialAsync("~/Plugins/SSI.Shipping.Manager/Views/Shipping/_DatesAndRanges.Dates.cshtml")
                </nop-panel>
                <nop-panel asp-name="datesandranges-ranges" asp-icon="fa fa-arrows-h" asp-title="@T("Admin.Configuration.Shipping.ProductAvailabilityRanges")" asp-hide-block-attribute-name="@hideRangesBlockAttributeName" asp-hide="@hideRangesBlock" asp-advanced="false">
                    @await Html.PartialAsync("~/Plugins/SSI.Shipping.Manager/Views/Shipping/_DatesAndRanges.Ranges.cshtml")
                </nop-panel>
                <nop-panel asp-name="datesandranges-cutoffs" asp-icon="fa fa-clock-o" asp-title="@T("Plugins.Shipping.Manager.CutOffTimes")" asp-hide-block-attribute-name="@hideRangesBlockAttributeName" asp-hide="@hideRangesBlock" asp-advanced="false">
                    @await Html.PartialAsync("~/Plugins/SSI.Shipping.Manager/Views/Shipping/_DatesAndRanges.CutOffTime.cshtml")
                </nop-panel>
                @await Component.InvokeAsync("AdminWidget", new { widgetZone = AdminWidgetZones.DatesAndRangesDetailsBlock, additionalData = Model })
            </nop-panels>
        </div>
    </div>
</div>